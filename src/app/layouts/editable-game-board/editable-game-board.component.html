<div class="jeopardy-container h-full p-4">
  <div class="jeopardy-board h-full flex flex-col">
    <!-- Header row with empty cell for points column -->
    <div class="grid grid-cols-[60px_repeat(5,1fr)] gap-1 mb-1">
      <div class="bg-transparent"></div>
      @for (category of categories(); track $index) {
        <div class="category-cell bg-blue-900 text-white p-4">
          <app-editable-category
            [categoryName]="category.name"
            (categoryNameChange)="updateCategoryName($index, $event)"
          />
        </div>
      }
    </div>

    <!-- Questions grid with points column -->
    <div class="questions-grid flex-grow grid grid-rows-5">
      @for (row of questionRows(); track row.id) {
        <div class="questions-row grid grid-cols-[60px_repeat(5,1fr)]">
          <div class="points-cell flex items-center justify-center">
            <app-editable-points
              [points]="row.value"
              (pointsChange)="onPointsChange(row.id, $event)"
            />
          </div>
          @for (category of categories(); track category.id) {
            @if (getQuestion()(category.id, row.value); as question) {
              <div
                class="question-cell editor-cell"
                [class.empty-cell]="!question.question || !question.answer"
                (click)="onQuestionClick(category, question)"
              >
                <div class="cell-value">{{ row.value }}</div>
                <div class="cell-content">
                  <div class="question-preview">
                    {{ question.question | mediaPreview | truncateText: 50 }}
                  </div>
                  <div class="divider"></div>
                  <div class="answer-preview">
                    {{ question.answer | mediaPreview | truncateText: 50 }}
                  </div>
                </div>
              </div>
            } @else {
              <div class="question-cell editor-cell empty-cell">
                <div class="cell-value">{{ row.value }}</div>
              </div>
            }
          }
        </div>
      }
    </div>
  </div>
</div>
